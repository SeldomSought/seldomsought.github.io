<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Philosophy - SeldomSought</title>
    <meta name="description" content="Learn about SeldomSought's philosophy of uncovering rare knowledge beyond conventional reach.">
    <meta name="theme-color" content="#1a1a2e"/>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&family=Orbitron:wght@400;500;700&family=Rajdhani:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        *{margin:0;padding:0;box-sizing:border-box}
        :root{
            --t-bg:#0d0e1a;--t-panel:#1a1c2e;--t-panel-light:#222440;
            --t-border:#3a3c5e;--t-border-light:#4a4c6e;
            --t-blue:#00b4d8;--t-blue-dim:#0077b6;--t-blue-glow:rgba(0,180,216,0.3);
            --t-green:#44cc44;--t-green-dark:#2a8a2a;--t-green-glow:rgba(68,204,68,0.3);
            --t-red:#cc3333;--t-yellow:#ccaa33;--t-purple:#9966cc;
            --t-cyan:#5599bb;
            --t-text:#c8cad0;--t-text-dim:#6a6c80;--t-text-bright:#e8eaf0;
            --t-mineral:#4fc3f7;--t-gas:#66bb6a
        }
        body{font-family:'Rajdhani',sans-serif;color:var(--t-text);background:var(--t-bg);line-height:1.5;overflow-x:hidden}
        .sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}

        /* === Background Layers === */
        #starfield{position:fixed;top:0;left:0;width:100%;height:100%;z-index:0;pointer-events:none}
        .terrain-overlay{
            position:fixed;top:-10px;left:-10px;right:-10px;bottom:-10px;z-index:1;pointer-events:none;
            background:
                repeating-linear-gradient(0deg,rgba(30,32,56,0.25) 0px,rgba(30,32,56,0.25) 1px,transparent 1px,transparent 40px),
                repeating-linear-gradient(90deg,rgba(30,32,56,0.25) 0px,rgba(30,32,56,0.25) 1px,transparent 1px,transparent 40px);
            transition:transform 0.1s linear
        }
        .fog-overlay{
            position:fixed;top:0;left:0;width:100%;height:100%;z-index:3;pointer-events:none;
            background:radial-gradient(ellipse at 45% 40%,transparent 25%,rgba(0,0,0,0.55) 100%)
        }
        .radar-sweep{
            position:fixed;top:50%;left:50%;width:200vmax;height:200vmax;
            transform:translate(-50%,-50%);z-index:2;pointer-events:none;
            background:conic-gradient(from 0deg,transparent 0deg,rgba(0,180,216,0.025) 25deg,transparent 50deg);
            animation:sweep 10s linear infinite
        }
        @keyframes sweep{to{transform:translate(-50%,-50%) rotate(360deg)}}
        .scanlines{
            position:fixed;top:0;left:0;width:100%;height:100%;z-index:4;pointer-events:none;
            background:repeating-linear-gradient(0deg,rgba(0,0,0,0.04) 0px,rgba(0,0,0,0.04) 1px,transparent 1px,transparent 3px)
        }

        /* === Navigation === */
        nav{position:fixed;top:0;width:100%;background:linear-gradient(180deg,#12132a,#1a1c30);border-bottom:2px solid var(--t-border);z-index:200}
        nav::after{content:'';position:absolute;bottom:-1px;left:0;width:100%;height:1px;background:linear-gradient(90deg,transparent,var(--t-blue),transparent);opacity:0.3}
        .nav-container{max-width:1200px;margin:0 auto;padding:0.8rem 2rem;display:flex;justify-content:space-between;align-items:center}
        .logo{font-family:'Orbitron',sans-serif;font-size:1.2rem;color:var(--t-blue);text-decoration:none;letter-spacing:3px;text-shadow:0 0 8px var(--t-blue-glow);font-weight:700}
        .nav-links{display:flex;gap:1.5rem;list-style:none}
        .nav-links a{text-decoration:none;color:var(--t-text-dim);font-family:'Share Tech Mono',monospace;font-size:0.75rem;letter-spacing:1px;text-transform:uppercase;transition:all 0.3s}
        .nav-links a:hover{color:var(--t-blue);text-shadow:0 0 6px var(--t-blue-glow)}
        .nav-links a:focus-visible{outline:2px solid var(--t-blue);outline-offset:3px}
        .menu-toggle{display:none;background:var(--t-panel);border:1px solid var(--t-border);font-size:1.3rem;cursor:pointer;color:var(--t-blue);padding:0.2rem 0.5rem}
        .mobile-menu{display:none}

        /* === Resource Bar === */
        .resource-bar{position:fixed;top:45px;left:0;width:100%;background:linear-gradient(180deg,#16182a,#1e2038);border-bottom:1px solid var(--t-border);z-index:190;padding:0.3rem 2rem;display:flex;justify-content:flex-end;gap:2rem;align-items:center}
        .resource{display:flex;align-items:center;gap:0.4rem;font-family:'Share Tech Mono',monospace;font-size:0.7rem;letter-spacing:1px}
        .resource-icon{width:12px;height:12px;border-radius:2px;display:inline-block}
        .resource-icon.mineral{background:var(--t-mineral);box-shadow:0 0 4px var(--t-mineral)}
        .resource-icon.gas{background:var(--t-gas);box-shadow:0 0 4px var(--t-gas)}
        .resource-icon.supply{background:var(--t-yellow);box-shadow:0 0 4px var(--t-yellow)}
        .resource .val{color:var(--t-text-bright)}
        .resource .label{color:var(--t-text-dim);font-size:0.6rem}

        /* === Toggle Buttons === */
        .toggle-group{position:fixed;top:48px;left:16px;z-index:195;display:flex;gap:4px}
        .t-btn{
            background:var(--t-panel);border:1px solid var(--t-border);
            color:var(--t-text-dim);font-family:'Share Tech Mono',monospace;
            font-size:0.6rem;padding:2px 8px;cursor:pointer;letter-spacing:1px;transition:all 0.2s
        }
        .t-btn:hover{color:var(--t-blue);border-color:var(--t-blue)}
        .t-btn:focus-visible{outline:2px solid var(--t-blue);outline-offset:2px}
        .t-btn.off{color:var(--t-red)}

        /* === Battlefield === */
        .battlefield{
            position:relative;z-index:10;width:100%;
            min-height:calc(100vh - 300px);margin-top:73px;padding-bottom:2rem
        }
        .page-title{text-align:center;padding:1.5rem 0 1rem;position:relative;z-index:10}
        .page-title h1{font-family:'Orbitron',sans-serif;font-weight:700;font-size:1.4rem;color:var(--t-text-bright);letter-spacing:5px;text-transform:uppercase;margin-bottom:0.3rem}
        .page-title .subtitle{font-family:'Share Tech Mono',monospace;font-size:0.7rem;color:var(--t-blue);letter-spacing:3px;text-transform:uppercase}

        .field-area{position:relative;width:100%;max-width:1000px;margin:0 auto;height:55vh;min-height:380px}

        /* === Terran Nodes === */
        .terran-node{
            position:absolute;width:110px;display:flex;flex-direction:column;align-items:center;
            cursor:pointer;transition:transform 0.15s;z-index:15;outline:none
        }
        .terran-node:hover{transform:translateY(-3px)}
        .terran-node .node-frame{
            width:72px;height:72px;border:1.5px solid var(--t-border-light);
            background:rgba(10,11,20,0.85);display:flex;align-items:center;justify-content:center;
            position:relative;transition:border-color 0.2s,box-shadow 0.2s
        }
        .terran-node:hover .node-frame,.terran-node.selected .node-frame{
            border-color:var(--t-green);box-shadow:0 0 12px var(--t-green-glow)
        }
        .terran-node .node-label{
            font-family:'Orbitron',sans-serif;font-size:0.55rem;color:var(--t-text-dim);
            margin-top:6px;letter-spacing:1px;text-transform:uppercase;text-align:center;
            transition:color 0.2s;white-space:nowrap
        }
        .terran-node:hover .node-label,.terran-node.selected .node-label{color:var(--t-text-bright)}
        .terran-node .node-type{
            font-family:'Share Tech Mono',monospace;font-size:0.45rem;color:var(--t-text-dim);
            letter-spacing:0.5px;margin-top:2px;opacity:0.6
        }

        /* Air unit idle bob */
        .terran-node.air-unit{animation:air-bob 4s ease-in-out infinite}
        @keyframes air-bob{0%,100%{transform:translateY(0)}50%{transform:translateY(-6px)}}
        .terran-node.air-unit:hover{animation-play-state:paused;transform:translateY(-3px)}
        .terran-node.air-unit.selected{animation-play-state:paused}

        /* Selection flash */
        @keyframes sel-flash{
            0%{box-shadow:0 0 0 transparent}
            50%{box-shadow:0 0 20px var(--t-green-glow),0 0 40px rgba(68,204,68,0.1)}
            100%{box-shadow:0 0 12px var(--t-green-glow)}
        }
        .terran-node.just-sel .node-frame{animation:sel-flash 0.3s ease-out}

        /* Selection ring */
        .terran-node .sel-ring{
            position:absolute;bottom:-10px;left:50%;transform:translateX(-50%);
            width:95px;height:22px;border:1.5px solid var(--t-green);border-radius:50%;
            opacity:0;transition:opacity 0.2s;
            box-shadow:0 0 8px var(--t-green-glow),inset 0 0 4px var(--t-green-glow);
            pointer-events:none
        }
        .terran-node:hover .sel-ring{opacity:0.5}
        .terran-node.selected .sel-ring{opacity:1;animation:ring-pulse 2s ease-in-out infinite}
        @keyframes ring-pulse{0%,100%{box-shadow:0 0 8px var(--t-green-glow)}50%{box-shadow:0 0 16px var(--t-green-glow),0 0 24px rgba(68,204,68,0.15)}}

        /* Target brackets */
        .bracket{position:absolute;width:8px;height:8px;border-color:var(--t-green);border-style:solid;border-width:0;opacity:0;transition:opacity 0.15s;pointer-events:none}
        .bracket.tl{top:-3px;left:-3px;border-top-width:2px;border-left-width:2px}
        .bracket.tr{top:-3px;right:-3px;border-top-width:2px;border-right-width:2px}
        .bracket.bl{bottom:-3px;left:-3px;border-bottom-width:2px;border-left-width:2px}
        .bracket.br{bottom:-3px;right:-3px;border-bottom-width:2px;border-right-width:2px}
        .terran-node:hover .bracket,.terran-node.selected .bracket{opacity:1}

        /* Base glow */
        .terran-node .base-glow{
            position:absolute;bottom:-5px;left:50%;transform:translateX(-50%);
            width:90px;height:20px;border-radius:50%;pointer-events:none;opacity:0.4
        }

        /* === Wireframe Icons === */
        .wireframe{width:50px;height:50px;position:relative}
        /* Command Center */
        .wf-cc .base{width:40px;height:24px;border:1.5px solid var(--t-blue);position:absolute;bottom:4px;left:5px}
        .wf-cc .top{width:24px;height:12px;border:1.5px solid var(--t-blue);position:absolute;top:6px;left:13px;border-bottom:none}
        .wf-cc .antenna{width:1.5px;height:10px;background:var(--t-blue);position:absolute;top:0;left:24px}
        .wf-cc .dot{width:4px;height:4px;border-radius:50%;background:var(--t-blue);position:absolute;top:14px;left:23px;box-shadow:0 0 4px var(--t-blue)}
        /* Supply Depot */
        .wf-sd .crate{width:34px;height:20px;border:1.5px solid var(--t-cyan);position:absolute;bottom:6px;left:8px}
        .wf-sd .lid{width:38px;height:2px;background:var(--t-cyan);position:absolute;bottom:25px;left:6px}
        .wf-sd .vent1{width:6px;height:4px;border:1px solid var(--t-cyan);position:absolute;bottom:14px;left:14px;opacity:0.7}
        .wf-sd .vent2{width:6px;height:4px;border:1px solid var(--t-cyan);position:absolute;bottom:14px;right:14px;opacity:0.7}
        .wf-sd .stripe{width:20px;height:1px;background:var(--t-cyan);position:absolute;bottom:10px;left:15px;opacity:0.4}
        /* Comsat Station */
        .wf-cs .platform{width:26px;height:6px;border:1.5px solid var(--t-purple);position:absolute;bottom:5px;left:12px}
        .wf-cs .mast{width:2px;height:18px;background:var(--t-purple);position:absolute;bottom:10px;left:24px}
        .wf-cs .dish{width:22px;height:10px;border:1.5px solid var(--t-purple);border-bottom:none;border-radius:50% 50% 0 0;position:absolute;top:10px;left:14px}
        .wf-cs .pulse{width:4px;height:4px;border-radius:50%;background:var(--t-purple);position:absolute;top:7px;left:23px;box-shadow:0 0 5px var(--t-purple)}
        /* Science Vessel */
        .wf-sv .hull{width:36px;height:20px;border:1.5px solid var(--t-purple);border-radius:50%;position:absolute;top:15px;left:7px}
        .wf-sv .ring{width:44px;height:8px;border:1.5px solid var(--t-purple);border-radius:50%;position:absolute;top:21px;left:3px}
        .wf-sv .sensor{width:5px;height:5px;border-radius:50%;border:1.5px solid var(--t-purple);position:absolute;top:8px;left:22px;box-shadow:0 0 4px var(--t-purple)}
        .wf-sv .beam{width:1.5px;height:8px;background:var(--t-purple);position:absolute;top:12px;left:24px;opacity:0.6}
        /* Siege Tank */
        .wf-st .body{width:36px;height:14px;border:1.5px solid var(--t-green);position:absolute;bottom:6px;left:7px}
        .wf-st .turret{width:16px;height:10px;border:1.5px solid var(--t-green);position:absolute;top:14px;left:15px}
        .wf-st .barrel{width:18px;height:3px;background:var(--t-green);position:absolute;top:17px;right:3px}
        .wf-st .tread1{width:32px;height:4px;border:1px solid var(--t-green);position:absolute;bottom:2px;left:9px;border-radius:2px}
        /* Battlecruiser */
        .wf-bc .hull{width:40px;height:13px;border:1.5px solid var(--t-yellow);position:absolute;top:18px;left:5px;clip-path:polygon(10% 0,100% 0,90% 100%,0 100%)}
        .wf-bc .bridge{width:13px;height:8px;border:1.5px solid var(--t-yellow);position:absolute;top:12px;left:19px}
        .wf-bc .wing-l{width:12px;height:5px;border:1px solid var(--t-yellow);position:absolute;top:25px;left:2px;transform:skewX(-15deg)}
        .wf-bc .wing-r{width:12px;height:5px;border:1px solid var(--t-yellow);position:absolute;top:25px;right:2px;transform:skewX(15deg)}
        .wf-bc .cannon{width:4px;height:4px;border-radius:50%;background:var(--t-yellow);position:absolute;top:10px;left:23px;box-shadow:0 0 6px var(--t-yellow)}

        /* === Decorative Elements === */
        .scv-dot{
            position:absolute;width:4px;height:4px;background:var(--t-blue);border-radius:50%;
            box-shadow:0 0 3px var(--t-blue);z-index:12;pointer-events:none;opacity:0.5
        }
        @keyframes patrol1{0%{left:38%;top:45%}25%{left:28%;top:38%}50%{left:42%;top:28%}75%{left:48%;top:42%}100%{left:38%;top:45%}}
        @keyframes patrol2{0%{left:55%;top:50%}33%{left:68%;top:38%}66%{left:62%;top:22%}100%{left:55%;top:50%}}
        @keyframes patrol3{0%{left:30%;top:62%}50%{left:24%;top:48%}100%{left:30%;top:62%}}
        .scv-dot.s1{animation:patrol1 14s linear infinite}
        .scv-dot.s2{animation:patrol2 18s linear infinite}
        .scv-dot.s3{animation:patrol3 11s linear infinite}

        .supply-crate{
            position:absolute;width:8px;height:6px;
            border:1px solid rgba(85,153,187,0.3);background:rgba(26,28,46,0.5);
            z-index:11;pointer-events:none
        }

        /* === Minimap === */
        .minimap{
            position:fixed;bottom:15px;left:15px;width:160px;height:120px;
            background:#0a0b15;border:2px solid var(--t-border);z-index:150;overflow:hidden
        }
        .minimap::before{
            content:'TACTICAL MAP';position:absolute;top:-1px;left:50%;transform:translateX(-50%);
            font-family:'Share Tech Mono',monospace;font-size:0.5rem;color:var(--t-text-dim);
            letter-spacing:1px;background:var(--t-border);padding:0 6px;z-index:2
        }
        .mm-terrain{position:absolute;inset:0;background:
            linear-gradient(135deg,rgba(26,42,26,0.4) 0%,transparent 50%),
            linear-gradient(315deg,rgba(26,42,26,0.3) 0%,transparent 40%);
        }
        .mm-grid{position:absolute;inset:0;background:
            repeating-linear-gradient(0deg,rgba(58,60,94,0.12) 0px,rgba(58,60,94,0.12) 1px,transparent 1px,transparent 20px),
            repeating-linear-gradient(90deg,rgba(58,60,94,0.12) 0px,rgba(58,60,94,0.12) 1px,transparent 1px,transparent 20px)
        }
        .mm-dot{
            position:absolute;width:6px;height:6px;cursor:pointer;z-index:3;
            transition:transform 0.2s,box-shadow 0.2s
        }
        .mm-dot::after{content:'';position:absolute;inset:0;border-radius:1px}
        .mm-dot:hover{transform:scale(1.8)}
        .mm-dot.selected::after{background:var(--t-green) !important;box-shadow:0 0 6px var(--t-green)}
        .mm-dot[data-c="blue"]::after{background:var(--t-blue)}
        .mm-dot[data-c="cyan"]::after{background:var(--t-cyan)}
        .mm-dot[data-c="purple"]::after{background:var(--t-purple)}
        .mm-dot[data-c="green"]::after{background:var(--t-green-dark)}
        .mm-dot[data-c="yellow"]::after{background:var(--t-yellow)}
        .mm-dot.pinned::after{box-shadow:0 0 6px var(--t-yellow);border:1px solid var(--t-yellow)}

        /* === Command Panel === */
        .command-panel{
            position:fixed;bottom:0;left:0;right:0;height:210px;
            background:linear-gradient(180deg,var(--t-panel),#10112a);
            border-top:2px solid var(--t-border);z-index:150;
            display:grid;grid-template-columns:130px 1fr 115px;
            transition:height 0.3s ease
        }
        .command-panel::before{
            content:'';position:absolute;top:-1px;left:0;width:100%;height:1px;
            background:linear-gradient(90deg,transparent,var(--t-blue),transparent);opacity:0.25
        }
        .command-panel.expanded{height:55vh}

        /* CP Portrait */
        .cp-portrait{
            background:#0a0b15;border-right:1px solid var(--t-border);
            display:flex;flex-direction:column;align-items:center;justify-content:center;
            padding:0.8rem;gap:0.5rem
        }
        .cp-pframe{
            width:72px;height:72px;border:2px solid var(--t-border-light);background:#0f1020;
            display:flex;align-items:center;justify-content:center;position:relative
        }
        .cp-pframe.active{border-color:var(--t-green);box-shadow:0 0 8px var(--t-green-glow)}
        .cp-pframe .placeholder{font-family:'Orbitron',sans-serif;font-size:1.4rem;color:var(--t-text-dim)}
        .cp-bars{width:72px}
        .bar-row{display:flex;align-items:center;gap:3px;margin-bottom:3px}
        .bar-label{font-family:'Share Tech Mono',monospace;font-size:0.5rem;color:var(--t-text-dim);width:12px;text-align:right}
        .bar-track{flex:1;height:4px;background:#0a0b15;border:1px solid #2a2c40;overflow:hidden}
        .bar-fill{height:100%}
        .bar-fill.hp{background:var(--t-green);box-shadow:0 0 3px var(--t-green)}
        .bar-fill.en{background:var(--t-purple);box-shadow:0 0 3px var(--t-purple)}
        .bar-fill.sh{background:var(--t-blue);box-shadow:0 0 3px var(--t-blue)}

        /* CP Info */
        .cp-info{display:flex;flex-direction:column;overflow:hidden}
        .cp-header{
            background:linear-gradient(90deg,var(--t-border) 0%,var(--t-panel-light) 50%,var(--t-border) 100%);
            padding:0.4rem 1rem;display:flex;justify-content:space-between;align-items:center;
            border-bottom:1px solid var(--t-border);flex-shrink:0
        }
        .cp-name{font-family:'Orbitron',sans-serif;font-size:0.7rem;font-weight:700;color:var(--t-blue);letter-spacing:2px;text-transform:uppercase;text-shadow:0 0 6px var(--t-blue-glow)}
        .cp-type{font-family:'Share Tech Mono',monospace;font-size:0.55rem;color:var(--t-text-dim);letter-spacing:1px}
        .cp-body{flex:1;overflow-y:auto;padding:0.8rem 1rem}
        .cp-body p{font-size:0.85rem;color:var(--t-text);line-height:1.7;margin-bottom:0.6rem}
        .cp-body .quote{font-size:1rem;font-weight:600;color:var(--t-blue);font-style:italic;border-left:2px solid var(--t-blue);padding-left:0.8rem;margin-bottom:0.8rem;text-shadow:0 0 8px var(--t-blue-glow)}
        .cp-body .section-label{font-family:'Share Tech Mono',monospace;font-size:0.7rem;letter-spacing:1px;margin-bottom:0.4rem}
        .cp-hint{color:var(--t-text-dim) !important;font-style:italic}

        /* CP Actions */
        .cp-actions{border-left:1px solid var(--t-border);display:flex;flex-direction:column;padding:8px;gap:4px;justify-content:center}
        .cmd-btn{
            height:30px;background:linear-gradient(180deg,var(--t-panel-light),var(--t-panel));
            border:1px solid var(--t-border);display:flex;align-items:center;justify-content:center;
            font-family:'Share Tech Mono',monospace;font-size:0.55rem;color:var(--t-text-dim);
            cursor:pointer;transition:all 0.15s;letter-spacing:0.5px
        }
        .cmd-btn:hover:not(:disabled){border-color:var(--t-blue);color:var(--t-blue);box-shadow:inset 0 0 8px var(--t-blue-glow)}
        .cmd-btn:focus-visible{outline:2px solid var(--t-blue);outline-offset:1px}
        .cmd-btn:disabled{opacity:0.35;cursor:default}
        .cmd-btn.active{border-color:var(--t-blue);background:linear-gradient(180deg,#1a2a4a,#142238);color:var(--t-blue)}
        .cmd-btn.pinned{border-color:var(--t-yellow);color:var(--t-yellow);background:linear-gradient(180deg,#2a2a1a,#22201a)}

        /* === Advisor === */
        .advisor{
            position:fixed;bottom:218px;left:15px;right:15px;z-index:150;
            font-family:'Share Tech Mono',monospace;font-size:0.6rem;color:var(--t-green);
            letter-spacing:1px;text-shadow:0 0 4px rgba(68,204,68,0.3);
            padding:0.3rem 0.5rem;background:rgba(10,11,20,0.7)
        }
        .advisor .callsign{color:var(--t-yellow)}

        /* === Mobile Content === */
        .mobile-content{display:none}
        .mobile-content .unit-panel{
            background:linear-gradient(135deg,var(--t-panel),#1e2038);
            border:1px solid var(--t-border);margin-bottom:1.2rem;overflow:hidden;position:relative
        }
        .mobile-content .unit-panel::before,.mobile-content .unit-panel::after{
            content:'';position:absolute;width:8px;height:8px;border-radius:50%;
            background:radial-gradient(circle,#3a3c55,#22243a);border:1px solid var(--t-border-light);z-index:5
        }
        .mobile-content .unit-panel::before{top:6px;left:6px}
        .mobile-content .unit-panel::after{top:6px;right:6px}
        .mobile-content .m-header{
            background:linear-gradient(90deg,var(--t-border),var(--t-panel-light),var(--t-border));
            padding:0.5rem 1.2rem;display:flex;justify-content:space-between;align-items:center;
            border-bottom:1px solid var(--t-border)
        }
        .mobile-content .m-name{font-family:'Orbitron',sans-serif;font-size:0.7rem;font-weight:700;color:var(--t-blue);letter-spacing:2px;text-transform:uppercase;text-shadow:0 0 6px var(--t-blue-glow)}
        .mobile-content .m-class{font-family:'Share Tech Mono',monospace;font-size:0.55rem;color:var(--t-text-dim);letter-spacing:1px}
        .mobile-content .m-body{padding:1rem 1.2rem}
        .mobile-content .m-body p{font-size:0.88rem;color:var(--t-text);line-height:1.7;margin-bottom:0.6rem}
        .mobile-content .m-body .quote{font-size:1rem;font-weight:600;color:var(--t-blue);font-style:italic;border-left:2px solid var(--t-blue);padding-left:0.8rem;margin-bottom:0.8rem;text-shadow:0 0 8px var(--t-blue-glow)}
        .mobile-content .section-divider{display:flex;align-items:center;gap:1rem;margin:1.5rem 0 1rem}
        .mobile-content .section-divider .line{flex:1;height:1px;background:linear-gradient(90deg,var(--t-border),transparent)}
        .mobile-content .section-divider .line:last-child{background:linear-gradient(90deg,transparent,var(--t-border))}
        .mobile-content .section-divider h2{font-family:'Orbitron',sans-serif;font-size:0.75rem;font-weight:500;color:var(--t-text-dim);letter-spacing:3px;text-transform:uppercase;white-space:nowrap}

        /* === Footer === */
        footer{background:linear-gradient(180deg,var(--t-panel),#12132a);border-top:2px solid var(--t-border);padding:2rem 2rem 1.5rem;position:relative;z-index:100;margin-top:0}
        footer::before{content:'';position:absolute;top:-1px;left:0;width:100%;height:1px;background:linear-gradient(90deg,transparent,var(--t-blue),transparent);opacity:0.2}
        .footer-content{max-width:1200px;margin:0 auto;display:grid;grid-template-columns:2fr 1fr 1fr;gap:3rem;margin-bottom:1.5rem}
        .footer-section h3{font-family:'Orbitron',sans-serif;font-size:0.7rem;margin-bottom:0.8rem;color:var(--t-blue);letter-spacing:2px;text-transform:uppercase;font-weight:500}
        .footer-section p{color:var(--t-text-dim);font-size:0.85rem;line-height:1.6}
        .footer-links{list-style:none}
        .footer-links a{color:var(--t-text-dim);text-decoration:none;display:block;padding:0.2rem 0;font-family:'Share Tech Mono',monospace;font-size:0.7rem;letter-spacing:1px;transition:all 0.2s}
        .footer-links a:hover{color:var(--t-blue);padding-left:0.4rem}
        .footer-links a:focus-visible{outline:2px solid var(--t-blue);outline-offset:2px}
        .footer-bottom{max-width:1200px;margin:0 auto;padding-top:1rem;border-top:1px solid var(--t-border);text-align:center;color:var(--t-text-dim);font-size:0.7rem;font-family:'Share Tech Mono',monospace;letter-spacing:1px}

        /* === FX Off === */
        body.fx-off .radar-sweep,body.fx-off .scanlines{display:none}
        body.fx-off .terrain-overlay{opacity:0.5}
        body.fx-off .sel-ring{animation:none !important}
        body.fx-off #starfield{opacity:0.3}
        body.fx-off .scv-dot{display:none}
        body.fx-off .terran-node.air-unit{animation:none}

        /* === Reduced Motion === */
        @media(prefers-reduced-motion:reduce){
            *,*::before,*::after{animation-duration:0.01ms !important;animation-iteration-count:1 !important;transition-duration:0.01ms !important}
            .radar-sweep,.scanlines,.scv-dot{display:none}
        }

        /* === Mobile === */
        @media(max-width:768px){
            .menu-toggle{display:block}
            .nav-links{display:none}
            .mobile-menu{position:fixed;top:45px;left:0;right:0;background:rgba(13,14,26,0.97);border-bottom:1px solid var(--t-border);padding:0.8rem 1.5rem;z-index:200}
            .mobile-menu.active{display:block}
            .mobile-menu ul{list-style:none}
            .mobile-menu a{display:block;padding:0.6rem 0;text-decoration:none;color:var(--t-text-dim);font-family:'Share Tech Mono',monospace;border-bottom:1px solid rgba(58,60,94,0.3);letter-spacing:1px;text-transform:uppercase;font-size:0.75rem}
            .mobile-menu a:hover{color:var(--t-blue)}
            .resource-bar,.toggle-group{display:none}
            .battlefield .field-area{display:none}
            .battlefield{min-height:auto;margin-top:55px;padding:0 1rem 1rem}
            .mobile-content{display:block}
            .command-panel,.minimap,.advisor{display:none}
            .footer-content{grid-template-columns:1fr;gap:1.5rem}
            .page-title h1{font-size:1.2rem}
            footer{margin-top:1rem}
        }
    </style>
</head>
<body>
    <canvas id="starfield"></canvas>
    <div class="terrain-overlay" id="terrainOverlay"></div>
    <div class="fog-overlay"></div>
    <div class="radar-sweep"></div>
    <div class="scanlines"></div>

    <nav>
        <div class="nav-container">
            <a href="index.html" class="logo">SeldomSought</a>
            <button class="menu-toggle" id="menuToggle">&#9776;</button>
            <ul class="nav-links">
                <li><a href="index.html">Home</a></li>
                <li><a href="philosophy.html">Philosophy</a></li>
                <li><a href="services.html">Services</a></li>
                <li><a href="expertise.html">Expertise</a></li>
                <li><a href="projects.html">Projects</a></li>
                <li><a href="faq.html">FAQ</a></li>
                <li><a href="contact.html">Contact</a></li>
            </ul>
        </div>
        <div class="mobile-menu" id="mobileMenu">
            <ul>
                <li><a href="index.html">Home</a></li>
                <li><a href="philosophy.html">Philosophy</a></li>
                <li><a href="services.html">Services</a></li>
                <li><a href="expertise.html">Expertise</a></li>
                <li><a href="projects.html">Projects</a></li>
                <li><a href="faq.html">FAQ</a></li>
                <li><a href="contact.html">Contact</a></li>
            </ul>
        </div>
    </nav>

    <div class="resource-bar">
        <div class="resource"><span class="resource-icon mineral"></span><span class="val" id="minerals">1,247</span><span class="label">MIN</span></div>
        <div class="resource"><span class="resource-icon gas"></span><span class="val" id="gas">863</span><span class="label">GAS</span></div>
        <div class="resource"><span class="resource-icon supply"></span><span class="val">87/200</span><span class="label">SUP</span></div>
    </div>

    <div class="toggle-group">
        <button class="t-btn" id="fxToggle" aria-label="Toggle visual effects">FX ON</button>
        <button class="t-btn" id="audioToggle" aria-label="Toggle audio">SFX OFF</button>
    </div>

    <main class="battlefield">
        <div class="page-title">
            <h1>Our Philosophy</h1>
            <div class="subtitle">Terran Command // Sector 7 // Briefing Protocol</div>
        </div>

        <div class="field-area" id="fieldArea">
            <!-- Decorative SCVs -->
            <div class="scv-dot s1"></div>
            <div class="scv-dot s2"></div>
            <div class="scv-dot s3"></div>

            <!-- Decorative supply crates -->
            <div class="supply-crate" style="left:36%;top:50%"></div>
            <div class="supply-crate" style="left:38%;top:52%"></div>
            <div class="supply-crate" style="left:50%;top:48%"></div>
            <div class="supply-crate" style="left:52%;top:46%"></div>

            <!-- Node 0: Command Center -->
            <div class="terran-node" data-node="0" tabindex="0" role="button" aria-label="Command Center - Core Philosophy" style="left:38%;top:30%">
                <div class="node-frame">
                    <div class="bracket tl"></div><div class="bracket tr"></div><div class="bracket bl"></div><div class="bracket br"></div>
                    <div class="wireframe wf-cc"><div class="base"></div><div class="top"></div><div class="antenna"></div><div class="dot"></div></div>
                </div>
                <div class="sel-ring"></div>
                <div class="base-glow" style="background:radial-gradient(ellipse,rgba(0,180,216,0.12),transparent 70%)"></div>
                <div class="node-label">Command Center</div>
                <div class="node-type">HQ</div>
            </div>

            <!-- Node 1: Supply Depot -->
            <div class="terran-node" data-node="1" tabindex="0" role="button" aria-label="Supply Depot - Core Beliefs" style="left:14%;top:26%">
                <div class="node-frame">
                    <div class="bracket tl"></div><div class="bracket tr"></div><div class="bracket bl"></div><div class="bracket br"></div>
                    <div class="wireframe wf-sd"><div class="crate"></div><div class="lid"></div><div class="vent1"></div><div class="vent2"></div><div class="stripe"></div></div>
                </div>
                <div class="sel-ring"></div>
                <div class="base-glow" style="background:radial-gradient(ellipse,rgba(85,153,187,0.12),transparent 70%)"></div>
                <div class="node-label">Supply Depot</div>
                <div class="node-type">SUPPORT</div>
            </div>

            <!-- Node 2: Comsat Station -->
            <div class="terran-node" data-node="2" tabindex="0" role="button" aria-label="Comsat Station - Guiding Insight" style="left:55%;top:5%">
                <div class="node-frame">
                    <div class="bracket tl"></div><div class="bracket tr"></div><div class="bracket bl"></div><div class="bracket br"></div>
                    <div class="wireframe wf-cs"><div class="platform"></div><div class="mast"></div><div class="dish"></div><div class="pulse"></div></div>
                </div>
                <div class="sel-ring"></div>
                <div class="base-glow" style="background:radial-gradient(ellipse,rgba(153,102,204,0.12),transparent 70%)"></div>
                <div class="node-label">Comsat Station</div>
                <div class="node-type">ADD-ON</div>
            </div>

            <!-- Node 3: Science Vessel -->
            <div class="terran-node air-unit" data-node="3" tabindex="0" role="button" aria-label="Science Vessel - Research Mission" style="left:78%;top:15%">
                <div class="node-frame">
                    <div class="bracket tl"></div><div class="bracket tr"></div><div class="bracket bl"></div><div class="bracket br"></div>
                    <div class="wireframe wf-sv"><div class="hull"></div><div class="ring"></div><div class="sensor"></div><div class="beam"></div></div>
                </div>
                <div class="sel-ring"></div>
                <div class="base-glow" style="background:radial-gradient(ellipse,rgba(153,102,204,0.12),transparent 70%)"></div>
                <div class="node-label">Science Vessel</div>
                <div class="node-type">DETECTOR</div>
            </div>

            <!-- Node 4: Siege Tank -->
            <div class="terran-node" data-node="4" tabindex="0" role="button" aria-label="Siege Tank - Deep Research" style="left:18%;top:68%">
                <div class="node-frame">
                    <div class="bracket tl"></div><div class="bracket tr"></div><div class="bracket bl"></div><div class="bracket br"></div>
                    <div class="wireframe wf-st"><div class="body"></div><div class="turret"></div><div class="barrel"></div><div class="tread1"></div></div>
                </div>
                <div class="sel-ring"></div>
                <div class="base-glow" style="background:radial-gradient(ellipse,rgba(68,204,68,0.1),transparent 70%)"></div>
                <div class="node-label">Siege Tank</div>
                <div class="node-type">MECH</div>
            </div>

            <!-- Node 5: Battlecruiser -->
            <div class="terran-node air-unit" data-node="5" tabindex="0" role="button" aria-label="Battlecruiser - Expert Networks" style="left:72%;top:58%">
                <div class="node-frame">
                    <div class="bracket tl"></div><div class="bracket tr"></div><div class="bracket bl"></div><div class="bracket br"></div>
                    <div class="wireframe wf-bc"><div class="hull"></div><div class="bridge"></div><div class="wing-l"></div><div class="wing-r"></div><div class="cannon"></div></div>
                </div>
                <div class="sel-ring"></div>
                <div class="base-glow" style="background:radial-gradient(ellipse,rgba(204,170,51,0.1),transparent 70%)"></div>
                <div class="node-label">Battlecruiser</div>
                <div class="node-type">FLAGSHIP</div>
            </div>
        </div>

        <!-- Mobile: full semantic content -->
        <div class="mobile-content">
            <article>
                <div class="unit-panel">
                    <div class="m-header"><span class="m-name">Command Center</span><span class="m-class">STRUCTURE // TIER 1 // HQ</span></div>
                    <div class="m-body"><p>In an age of instant information, true knowledge has become paradoxically more elusive. While search engines provide surface-level answers, they often miss the nuanced, the forgotten, and the deliberately obscure.</p></div>
                </div>
                <div class="unit-panel">
                    <div class="m-header"><span class="m-name">Supply Depot</span><span class="m-class">STRUCTURE // TIER 1 // SUPPORT</span></div>
                    <div class="m-body"><p>At SeldomSought, we believe that the most valuable insights lie in the margins of mainstream knowledge -- in dusty archives, specialist publications, oral traditions, and the collective wisdom of experts across diverse fields.</p></div>
                </div>

                <div class="section-divider"><div class="line"></div><h2>Intelligence</h2><div class="line"></div></div>

                <div class="unit-panel">
                    <div class="m-header"><span class="m-name">Comsat Station</span><span class="m-class">ADD-ON // TIER 2 // SCAN</span></div>
                    <div class="m-body"><p class="quote">"The questions you don't know to ask are often more important than the answers you seek."</p></div>
                </div>
                <div class="unit-panel">
                    <div class="m-header"><span class="m-name">Science Vessel</span><span class="m-class">AIR UNIT // TIER 3 // DETECTOR</span></div>
                    <div class="m-body"><p>Our mission is to bridge the gap between curiosity and discovery, helping individuals, researchers, and organizations access information that traditional methods fail to uncover.</p></div>
                </div>

                <div class="section-divider"><div class="line"></div><h2>Tactical Approach</h2><div class="line"></div></div>

                <div class="unit-panel">
                    <div class="m-header"><span class="m-name">Siege Tank</span><span class="m-class">GROUND // TIER 2 // MECH</span></div>
                    <div class="m-body"><p><strong style="color:var(--t-green);letter-spacing:1px">DEEP RESEARCH</strong></p><p>We don't stop at Google page one. Our researchers delve into academic databases, historical archives, and specialist networks to find what others miss.</p></div>
                </div>
                <div class="unit-panel">
                    <div class="m-header"><span class="m-name">Battlecruiser</span><span class="m-class">CAPITAL // TIER 3 // FLAGSHIP</span></div>
                    <div class="m-body"><p><strong style="color:var(--t-yellow);letter-spacing:1px">EXPERT NETWORKS</strong></p><p>Access to over 500 subject matter experts across disciplines ensures we can tackle questions from medieval manuscripts to quantum physics.</p></div>
                </div>
            </article>
        </div>
    </main>

    <!-- Minimap -->
    <div class="minimap" id="minimap">
        <div class="mm-terrain"></div>
        <div class="mm-grid"></div>
        <div class="mm-dot" data-node="0" data-c="blue" style="left:40%;top:33%" tabindex="0" role="button" aria-label="Select Command Center"></div>
        <div class="mm-dot" data-node="1" data-c="cyan" style="left:16%;top:30%" tabindex="0" role="button" aria-label="Select Supply Depot"></div>
        <div class="mm-dot" data-node="2" data-c="purple" style="left:57%;top:12%" tabindex="0" role="button" aria-label="Select Comsat Station"></div>
        <div class="mm-dot" data-node="3" data-c="purple" style="left:80%;top:20%" tabindex="0" role="button" aria-label="Select Science Vessel"></div>
        <div class="mm-dot" data-node="4" data-c="green" style="left:20%;top:70%" tabindex="0" role="button" aria-label="Select Siege Tank"></div>
        <div class="mm-dot" data-node="5" data-c="yellow" style="left:74%;top:62%" tabindex="0" role="button" aria-label="Select Battlecruiser"></div>
    </div>

    <!-- Advisor -->
    <div class="advisor" id="advisor"><span class="callsign">[ADJUTANT]</span> Briefing loaded. All units reporting. Select a unit or structure for detailed intel.</div>

    <!-- Command Panel -->
    <div class="command-panel" id="cmdPanel">
        <div class="cp-portrait" id="cpPortrait">
            <div class="cp-pframe" id="cpFrame"><span class="placeholder">?</span></div>
            <div class="cp-bars" id="cpBars"></div>
        </div>
        <div class="cp-info">
            <div class="cp-header"><span class="cp-name" id="cpName">Awaiting Selection</span><span class="cp-type" id="cpType">-- // --</span></div>
            <div class="cp-body" id="cpBody"><p class="cp-hint">Select a unit or structure on the battlefield to view briefing data.</p></div>
        </div>
        <div class="cp-actions">
            <button class="cmd-btn" id="btnExpand" disabled title="Expand panel (E)">EXPAND</button>
            <button class="cmd-btn" id="btnPin" disabled title="Pin content (P)">PIN</button>
            <button class="cmd-btn" id="btnBack" disabled title="Deselect (Esc)">BACK</button>
            <button class="cmd-btn" id="btnView" disabled title="View unit (Enter)">VIEW</button>
        </div>
    </div>

    <footer>
        <div class="footer-content">
            <div class="footer-section"><h3>SeldomSought</h3><p>Brand image, marketing strategy, and business consulting for brands built to stand out.</p></div>
            <div class="footer-section"><h3>Navigate</h3><ul class="footer-links"><li><a href="philosophy.html">Philosophy</a></li><li><a href="services.html">Services</a></li><li><a href="expertise.html">Expertise</a></li><li><a href="projects.html">Projects</a></li><li><a href="faq.html">FAQ</a></li><li><a href="contact.html">Contact</a></li></ul></div>
            <div class="footer-section"><h3>Services</h3><ul class="footer-links"><li><a href="services.html">Brand Image</a></li><li><a href="services.html">SEO &amp; AEO</a></li><li><a href="services.html">Guerrilla Marketing</a></li><li><a href="services.html">Copywriting</a></li></ul></div>
        </div>
        <div class="footer-bottom"><p>&copy; 2024 SeldomSought. All rights reserved.</p></div>
    </footer>

    <script>
    (function(){
        'use strict';
        var RM = window.matchMedia('(prefers-reduced-motion:reduce)').matches;

        // === Unit Data (6 nodes) ===
        var units = [
            {id:'cc',name:'Command Center',type:'STRUCTURE // TIER 1 // HQ',color:'#00b4d8',
             hp:100,en:75,sh:0,
             wireframe:'wf-cc',pieces:['base','top','antenna','dot'],
             advisor:'Command Center online. Strategic overview loaded.',
             body:'<p>In an age of instant information, true knowledge has become paradoxically more elusive. While search engines provide surface-level answers, they often miss the nuanced, the forgotten, and the deliberately obscure.</p>'},
            {id:'sd',name:'Supply Depot',type:'STRUCTURE // TIER 1 // SUPPORT',color:'#5599bb',
             hp:100,en:40,sh:0,
             wireframe:'wf-sd',pieces:['crate','lid','vent1','vent2','stripe'],
             advisor:'Supply Depot operational. Core beliefs archived.',
             body:'<p>At SeldomSought, we believe that the most valuable insights lie in the margins of mainstream knowledge -- in dusty archives, specialist publications, oral traditions, and the collective wisdom of experts across diverse fields.</p>'},
            {id:'cs',name:'Comsat Station',type:'ADD-ON // TIER 2 // SCAN',color:'#9966cc',
             hp:80,en:100,sh:0,
             wireframe:'wf-cs',pieces:['platform','mast','dish','pulse'],
             advisor:'Comsat Station scanning. Deep-space frequencies monitored.',
             body:'<p class="quote">"The questions you don\'t know to ask are often more important than the answers you seek."</p>'},
            {id:'sv',name:'Science Vessel',type:'AIR UNIT // TIER 3 // DETECTOR',color:'#9966cc',
             hp:85,en:100,sh:60,
             wireframe:'wf-sv',pieces:['hull','ring','sensor','beam'],
             advisor:'Science Vessel on station. Research protocols active.',
             body:'<p>Our mission is to bridge the gap between curiosity and discovery, helping individuals, researchers, and organizations access information that traditional methods fail to uncover.</p>'},
            {id:'st',name:'Siege Tank',type:'GROUND // TIER 2 // MECH',color:'#44cc44',
             hp:95,en:50,sh:0,
             wireframe:'wf-st',pieces:['body','turret','barrel','tread1'],
             advisor:'Siege Tank deployed. Deep research protocols engaged.',
             body:'<p class="section-label" style="color:#44cc44">DEEP RESEARCH</p><p>We don\'t stop at Google page one. Our researchers delve into academic databases, historical archives, and specialist networks to find what others miss.</p>'},
            {id:'bc',name:'Battlecruiser',type:'CAPITAL // TIER 3 // FLAGSHIP',color:'#ccaa33',
             hp:100,en:90,sh:100,
             wireframe:'wf-bc',pieces:['hull','bridge','wing-l','wing-r','cannon'],
             advisor:'Battlecruiser operational. Expert networks standing by.',
             body:'<p class="section-label" style="color:#ccaa33">EXPERT NETWORKS</p><p>Access to over 500 subject matter experts across disciplines ensures we can tackle questions from medieval manuscripts to quantum physics.</p>'}
        ];

        // === DOM Refs ===
        var nodes = document.querySelectorAll('.terran-node');
        var mmDots = document.querySelectorAll('.mm-dot');
        var cpName = document.getElementById('cpName');
        var cpType = document.getElementById('cpType');
        var cpBody = document.getElementById('cpBody');
        var cpFrame = document.getElementById('cpFrame');
        var cpBars = document.getElementById('cpBars');
        var cmdPanel = document.getElementById('cmdPanel');
        var advisorEl = document.getElementById('advisor');
        var btnExpand = document.getElementById('btnExpand');
        var btnBack = document.getElementById('btnBack');
        var btnView = document.getElementById('btnView');
        var btnPin = document.getElementById('btnPin');
        var fxToggle = document.getElementById('fxToggle');
        var audioToggle = document.getElementById('audioToggle');
        var terrainOverlay = document.getElementById('terrainOverlay');

        var selected = -1;
        var pinned = -1;
        var expanded = false;
        var fxOn = true;
        var audioOn = false;

        // === WebAudio ===
        var audioCtx;
        function initAudio(){
            if(!audioCtx){
                try{audioCtx = new (window.AudioContext || window.webkitAudioContext)()}
                catch(e){audioOn=false}
            }
        }
        function beep(freq,dur,type,rampTo){
            if(!audioOn||!audioCtx) return;
            try{
                var osc=audioCtx.createOscillator();
                var gain=audioCtx.createGain();
                osc.connect(gain);gain.connect(audioCtx.destination);
                osc.type=type||'sine';
                osc.frequency.setValueAtTime(freq,audioCtx.currentTime);
                if(rampTo) osc.frequency.linearRampToValueAtTime(rampTo,audioCtx.currentTime+dur/1000);
                gain.gain.setValueAtTime(0.06,audioCtx.currentTime);
                gain.gain.exponentialRampToValueAtTime(0.001,audioCtx.currentTime+dur/1000);
                osc.start();osc.stop(audioCtx.currentTime+dur/1000);
            }catch(e){}
        }
        function sfxSelect(){beep(800,80,'sine')}
        function sfxExpand(){beep(600,120,'sine',900)}
        function sfxDeselect(){beep(500,70,'sine',350)}
        function sfxPin(){beep(1000,50,'square');setTimeout(function(){beep(1200,50,'square')},60)}

        audioToggle.addEventListener('click',function(){
            audioOn=!audioOn;
            if(audioOn) initAudio();
            audioToggle.textContent=audioOn?'SFX ON':'SFX OFF';
            audioToggle.classList.toggle('off',!audioOn);
            if(audioOn) sfxSelect();
        });

        // === Selection ===
        function showUnit(idx){
            var u=units[idx];
            cpName.textContent=u.name;
            cpType.textContent=u.type;
            cpBody.innerHTML=u.body;
            var wfHtml='<div class="wireframe '+u.wireframe+'">';
            u.pieces.forEach(function(p){wfHtml+='<div class="'+p+'"></div>'});
            wfHtml+='</div>';
            cpFrame.innerHTML=wfHtml;
            cpFrame.classList.add('active');
            cpFrame.style.borderColor=u.color;
            cpFrame.style.boxShadow='0 0 8px '+u.color+'4d';
            var barsHtml='<div class="bar-row"><span class="bar-label">HP</span><div class="bar-track"><div class="bar-fill hp" style="width:'+u.hp+'%"></div></div></div>';
            barsHtml+='<div class="bar-row"><span class="bar-label">EN</span><div class="bar-track"><div class="bar-fill en" style="width:'+u.en+'%"></div></div></div>';
            if(u.sh>0) barsHtml+='<div class="bar-row"><span class="bar-label">SH</span><div class="bar-track"><div class="bar-fill sh" style="width:'+u.sh+'%"></div></div></div>';
            cpBars.innerHTML=barsHtml;
        }

        function selectNode(idx){
            nodes.forEach(function(n){n.classList.remove('selected','just-sel')});
            mmDots.forEach(function(d){d.classList.remove('selected')});

            if(idx<0||idx>=units.length){
                selected=-1;
                if(pinned>=0){
                    showUnit(pinned);
                    advisorEl.innerHTML='<span class="callsign">[ADJUTANT]</span> '+units[pinned].name+' pinned. Select another unit or press P to unpin.';
                    btnExpand.disabled=false;btnBack.disabled=false;btnView.disabled=false;btnPin.disabled=false;
                }else{
                    cpName.textContent='Awaiting Selection';
                    cpType.textContent='-- // --';
                    cpBody.innerHTML='<p class="cp-hint">Select a unit or structure on the battlefield to view briefing data.</p>';
                    cpFrame.innerHTML='<span class="placeholder">?</span>';
                    cpFrame.classList.remove('active');
                    cpFrame.style.borderColor='';cpFrame.style.boxShadow='';
                    cpBars.innerHTML='';
                    btnExpand.disabled=true;btnBack.disabled=true;btnView.disabled=true;btnPin.disabled=true;
                    advisorEl.innerHTML='<span class="callsign">[ADJUTANT]</span> All units standing by. Awaiting orders.';
                    if(expanded){expanded=false;cmdPanel.classList.remove('expanded');btnExpand.textContent='EXPAND'}
                }
                sfxDeselect();
                return;
            }

            selected=idx;
            var u=units[idx];
            nodes[idx].classList.add('selected','just-sel');
            setTimeout(function(){if(nodes[idx])nodes[idx].classList.remove('just-sel')},300);
            nodes[idx].focus();
            mmDots[idx].classList.add('selected');

            showUnit(idx);
            btnExpand.disabled=false;btnBack.disabled=false;btnView.disabled=false;btnPin.disabled=false;
            advisorEl.innerHTML='<span class="callsign">[ADJUTANT]</span> '+u.advisor;
            sfxSelect();
        }

        // === Node clicks ===
        nodes.forEach(function(n,i){
            n.addEventListener('click',function(){selectNode(i)});
            n.addEventListener('keydown',function(e){
                if(e.key==='Enter'||e.key===' '){e.preventDefault();selectNode(i)}
            });
        });

        // === Minimap clicks ===
        mmDots.forEach(function(d){
            var idx=parseInt(d.dataset.node);
            d.addEventListener('click',function(){selectNode(idx);scrollToNode(idx)});
        });

        function scrollToNode(idx){
            nodes[idx].scrollIntoView({behavior:'smooth',block:'center'});
        }

        // === Spatial Keyboard Navigation ===
        function getNodePos(idx){
            var el=nodes[idx];
            var left=parseFloat(el.style.left);
            var top=parseFloat(el.style.top);
            return{x:left,y:top};
        }

        function findNearest(fromIdx,dir){
            if(fromIdx<0) return 0;
            var cur=getNodePos(fromIdx);
            var best=-1,bestDist=Infinity;
            for(var i=0;i<nodes.length;i++){
                if(i===fromIdx) continue;
                var p=getNodePos(i);
                var dx=p.x-cur.x,dy=p.y-cur.y;
                var valid=false;
                switch(dir){
                    case 'left':valid=dx<-5;break;
                    case 'right':valid=dx>5;break;
                    case 'up':valid=dy<-5;break;
                    case 'down':valid=dy>5;break;
                }
                if(valid){
                    var dist=Math.sqrt(dx*dx+dy*dy);
                    if(dist<bestDist){bestDist=dist;best=i}
                }
            }
            return best>=0?best:fromIdx;
        }

        document.addEventListener('keydown',function(e){
            if(e.target.tagName==='INPUT'||e.target.tagName==='TEXTAREA') return;
            var handled=true;

            if(e.key==='ArrowRight'){selectNode(findNearest(selected,'right'))}
            else if(e.key==='ArrowLeft'){selectNode(findNearest(selected,'left'))}
            else if(e.key==='ArrowUp'){selectNode(findNearest(selected,'up'))}
            else if(e.key==='ArrowDown'){selectNode(findNearest(selected,'down'))}
            else if(e.key==='Escape'){
                if(expanded){toggleExpand()}
                else{pinned=-1;updatePinUI();selectNode(-1)}
            }
            else if(e.key==='Enter'&&selected>=0){toggleExpand()}
            else if(e.key==='e'||e.key==='E'){if(selected>=0)toggleExpand()}
            else if(e.key==='p'||e.key==='P'){if(selected>=0)togglePin()}
            else{handled=false}

            if(handled) e.preventDefault();
        });

        // === Expand / Back / Pin ===
        function toggleExpand(){
            if(selected<0&&pinned<0) return;
            expanded=!expanded;
            cmdPanel.classList.toggle('expanded',expanded);
            btnExpand.textContent=expanded?'SHRINK':'EXPAND';
            if(expanded) sfxExpand();
        }

        function togglePin(){
            if(selected<0) return;
            if(pinned===selected){
                pinned=-1;
            }else{
                pinned=selected;
                sfxPin();
            }
            updatePinUI();
        }

        function updatePinUI(){
            btnPin.classList.toggle('pinned',pinned>=0);
            btnPin.textContent=pinned>=0?'UNPIN':'PIN';
            mmDots.forEach(function(d){d.classList.remove('pinned')});
            if(pinned>=0) mmDots[pinned].classList.add('pinned');
        }

        btnExpand.addEventListener('click',function(){toggleExpand()});
        btnBack.addEventListener('click',function(){
            if(expanded){toggleExpand()}
            else{pinned=-1;updatePinUI();selectNode(-1)}
        });
        btnView.addEventListener('click',function(){
            var target=selected>=0?selected:pinned;
            if(target>=0) scrollToNode(target);
        });
        btnPin.addEventListener('click',function(){togglePin()});

        // === Click battlefield to deselect ===
        document.getElementById('fieldArea').addEventListener('click',function(e){
            if(!e.target.closest('.terran-node')) selectNode(-1);
        });

        // === Effects Toggle ===
        fxToggle.addEventListener('click',function(){
            fxOn=!fxOn;
            document.body.classList.toggle('fx-off',!fxOn);
            fxToggle.textContent=fxOn?'FX ON':'FX OFF';
            fxToggle.classList.toggle('off',!fxOn);
        });

        // === Parallax ===
        document.addEventListener('mousemove',function(e){
            if(RM||!fxOn) return;
            var x=(e.clientX/window.innerWidth-0.5)*2;
            var y=(e.clientY/window.innerHeight-0.5)*2;
            terrainOverlay.style.transform='translate('+(-x*4)+'px,'+(-y*4)+'px)';
        });

        // === Starfield ===
        var canvas=document.getElementById('starfield');
        var ctx=canvas.getContext('2d');
        function resize(){canvas.width=window.innerWidth;canvas.height=window.innerHeight}
        resize();window.addEventListener('resize',resize);

        var stars=[];
        for(var i=0;i<150;i++){
            stars.push({x:Math.random()*2000,y:Math.random()*2000,r:Math.random()*1.1+0.3,a:Math.random()*0.5+0.15,speed:Math.random()*0.0004+0.0002,phase:Math.random()*Math.PI*2});
        }
        function drawStars(){
            ctx.fillStyle='#0d0e1a';ctx.fillRect(0,0,canvas.width,canvas.height);
            if(!fxOn){requestAnimationFrame(drawStars);return}
            var t=Date.now();
            for(var j=0;j<stars.length;j++){
                var s=stars[j];
                var flicker=RM?0.7:0.5+0.5*Math.sin(t*s.speed+s.phase);
                ctx.fillStyle='rgba(180,190,220,'+(s.a*flicker)+')';
                ctx.beginPath();ctx.arc(s.x%canvas.width,s.y%canvas.height,s.r,0,Math.PI*2);ctx.fill();
            }
            requestAnimationFrame(drawStars);
        }
        drawStars();

        // === Resource Ticker ===
        var minerals=1247,gas=863;
        setInterval(function(){
            minerals+=Math.floor(Math.random()*12)-3;gas+=Math.floor(Math.random()*8)-2;
            if(minerals<0)minerals=0;if(gas<0)gas=0;
            document.getElementById('minerals').textContent=minerals.toLocaleString();
            document.getElementById('gas').textContent=gas.toLocaleString();
        },2000);

        // === Mobile Menu ===
        var menuToggle=document.getElementById('menuToggle'),mobileMenu=document.getElementById('mobileMenu');
        menuToggle.addEventListener('click',function(e){
            e.stopPropagation();mobileMenu.classList.toggle('active');
            menuToggle.innerHTML=mobileMenu.classList.contains('active')?'&#10005;':'&#9776;';
        });
        document.addEventListener('click',function(e){
            if(!e.target.closest('nav')){mobileMenu.classList.remove('active');menuToggle.innerHTML='&#9776;'}
        });
    })();
    </script>
</body>
</html>
